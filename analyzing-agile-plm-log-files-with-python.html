
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="author" content="Sergei Vovk" />
        <meta name="keywords" content="Agile PLM,Python,Pandas" />
        <meta name="description" content="Sometimes it is useful to get an overview of log files generated by a system and Agile PLM is not an exception. For logging Agile uses log4j library which is capable of producing very parsing-friendly formats. Although in practice the system is usually configured to generate plain text files in â€¦" />


    <title>Analyzing Agile PLM log files with Python - Sergei Vovk | Blog</title>

        <link rel="stylesheet" href="https://svovk.github.io/theme/css/bootstrap.min.css" type="text/css" />

    <link href="https://svovk.github.io/theme/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://svovk.github.io/theme/css/pygments/native.css" rel="stylesheet" />
    
    <link href="https://svovk.github.io/theme/css/pelican-twitchy.min.css" rel="stylesheet" />
    <link href="https://svovk.github.io/theme/css/pelican-twitchy-custom.css" rel="stylesheet" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Feeds -->
        <link href="https://svovk.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Sergei Vovk | Blog ATOM Feed" />
</head>
<body data-spy="scroll" data-target="#scrollspy">
    <div id="wrapper">
        <!-- Sidebar -->
        <div id="sidebar-wrapper-small" class="twitchy-background">
            <ul id="accordion-small" class="sidebar-nav sidebar-nav-small">
                <li>
        <a href="https://svovk.github.io" title="Sergei Vovk | Blog" class="collapsed">
            <span class="glyphicon glyphicon-home"></span>
        </a>
    </li>
                <li class="nav-divider"></li>
                <li>
        <a href="https://svovk.github.io/archives.html" title="Recent Articles" class="collapsed">
            <span class="glyphicon glyphicon-th-list"></span>
        </a>
    </li>
                
                <li class="nav-divider"></li>
                <li>
                    <a data-toggle="collapse" data-parent="#accordion-small" href="#collapse-social-small" title="Social" class="collapsed">
                        <i class="fa fa-users padding-small"></i>
                    </a>
                </li>
                <li class="panel anti-panel"><ul id="collapse-social-small" class="collapse ">
                    <li>
                        <a href="https://github.com/svovk" title="GitHub"><i class="fa fa-github-square fa-lg padding-small"></i></a>
                    </li>
                    <li>
                        <a href="https://www.hackerrank.com/svovk" title="HackerRank"><i class="fa fa-arrow-up fa-lg padding-small"></i></a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/in/sergei-vovk-9a32b197/" title="LinkedIn"><i class="fa fa-linkedin-square fa-lg padding-small"></i></a>
                    </li>
                </ul></li>
                <li class="nav-divider"></li>
                <li>
        <a href="#" title="Back to top" class="collapsed">
            <span class="fa fa-arrow-up"></span>
        </a>
    </li>
            </ul>
        </div>
        <div id="sidebar-wrapper" class="twitchy-background">
            <ul id="accordion" class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="https://svovk.github.io/">
                            <span class="glyphicon glyphicon-home padding-small"></span>
                            Sergei Vovk | Blog
                    </a>
                </li>
                    <li>
                        <a href="https://svovk.github.io/archives.html">
                            <span class="glyphicon glyphicon-th-list padding-small"></span>
                            Recent Articles
                        </a>
                    </li>
                <li class="nav-divider"></li>
                <li>
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapse-social">
                        <i class="fa fa-users padding-small"></i>
                        Contact
                    </a>
                </li>
                <li class="panel anti-panel"><ul id="collapse-social" class="sidebar_submenu collapse ">
                    <li>
                        <a href="https://github.com/svovk" title="GitHub">
                            <i class="fa fa-github-square fa-lg padding-small"></i>
                            GitHub
                        </a>
                    </li>
                    <li>
                        <a href="https://www.hackerrank.com/svovk" title="HackerRank">
                            <i class="fa fa-arrow-up fa-lg padding-small"></i>
                            HackerRank
                        </a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/in/sergei-vovk-9a32b197/" title="LinkedIn">
                            <i class="fa fa-linkedin-square fa-lg padding-small"></i>
                            LinkedIn
                        </a>
                    </li>
                </ul></li>
                
                <li class="nav-divider"></li>
                <li>
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapse-pages">
                        <i class="fa fa-folder-open padding-small"></i>
                        Pages
                    </a>
                </li>
                <li class="panel anti-panel"><ul id="collapse-pages" class="sidebar_submenu collapse ">
                </ul></li>
                
                <li class="nav-divider"></li>
                <li>
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapse-categories">
                        <i class="fa fa-folder-open padding-small"></i>
                        Categories
                    </a>
                </li>
                <li class="panel anti-panel"><ul id="collapse-categories" class="sidebar_submenu collapse ">
                    <li class="active">
                        <a href="https://svovk.github.io/category/agile-plm.html">
                            <i class="fa fa-folder-open padding-small"></i>
                            Agile PLM
                            <span class="badge pull-right categorybadge">5</span>
                        </a>
                    </li>
                    <li >
                        <a href="https://svovk.github.io/category/databases.html">
                            <i class="fa fa-folder-open padding-small"></i>
                            Databases
                            <span class="badge pull-right categorybadge">4</span>
                        </a>
                    </li>
                    <li >
                        <a href="https://svovk.github.io/category/java.html">
                            <i class="fa fa-folder-open padding-small"></i>
                            Java
                            <span class="badge pull-right categorybadge">2</span>
                        </a>
                    </li>
                    <li >
                        <a href="https://svovk.github.io/category/misc.html">
                            <i class="fa fa-folder-open padding-small"></i>
                            Misc
                            <span class="badge pull-right categorybadge">1</span>
                        </a>
                    </li>
                    <li >
                        <a href="https://svovk.github.io/category/oracle-ebs.html">
                            <i class="fa fa-folder-open padding-small"></i>
                            Oracle EBS
                            <span class="badge pull-right categorybadge">2</span>
                        </a>
                    </li>
                </ul></li>
                
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->
        <!-- open/close sidebar -->
        <a href="#menu-toggle" class="btn btn-default" id="menu-toggle">
            <span id="right-arrow" class="glyphicon glyphicon-chevron-right"  title="expand sidebar"></span>
            <span id="left-arrow" class="glyphicon glyphicon-chevron-left" title="minimize sidebar"></span>
        </a>
       <!-- /open/close sidebar -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
<section id="content">
    <article>
        <div class="row">
            <div class="col-lg-9">
                <header class="page-header">
                    <h1>
                        <a href="https://svovk.github.io/analyzing-agile-plm-log-files-with-python.html"
                           rel="bookmark"
                           title="Permalink to Analyzing Agile PLM log files with Python">
                            Analyzing Agile PLM log files with Python
                        </a>
                        <small>
<div class="post-info">
    <div class="publish-info-block">
        <small>
            <span class="published">
                <i class="fa fa-calendar padding-small"></i><time datetime="2018-05-07T10:20:00+03:00"> Mon 07 May 2018</time>
            </span>
            <span class="category">
                <i class="fa fa-folder-open padding-small"></i><a href="https://svovk.github.io/category/agile-plm.html">Agile PLM</a>
            </span>
            <span class="tags">
                <i class="fa fa-tags padding-small"></i>
                <a href="https://svovk.github.io/tag/agile-plm.html">Agile PLM</a> /                 <a href="https://svovk.github.io/tag/python.html">Python</a> /                 <a href="https://svovk.github.io/tag/pandas.html">Pandas</a>            </span>
        </small>
    </div>
</div><!-- /.post-info -->                        </small>
                    </h1>
                </header>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-9">
                <div class="entry-content">
                    <p>Sometimes it is useful to get an overview of log files generated by a system and Agile PLM is not an exception. For logging Agile uses <em>log4j</em> library which is capable of producing very parsing-friendly formats. Although in practice the system is usually configured to generate plain text files in which log entries look like one below</p>
<div class="highlight"><pre><span></span>2000-10-10 00:01:21,043 &lt;ChangeHistoryService:ERROR&gt;    process change notification failed:
ORA-00001: unique constraint (AGILE.CHANGE_HISTORY_PK) violated

ORA-00001: unique constraint (AGILE.CHANGE_HISTORY_PK) violated

java.sql.BatchUpdateException: ORA-00001: unique constraint (AGILE.CHANGE_HISTORY_PK) violated

    at oracle.jdbc.driver.OraclePreparedStatement.executeBatch(OraclePreparedStatement.java:10401)
    at oracle.jdbc.driver.OracleStatementWrapper.executeBatch(OracleStatementWrapper.java:230)
    at weblogic.jdbc.wrapper.PreparedStatement.executeBatch(PreparedStatement.java:205)
    at com.agile.pc.cmserver.base.BaseRouteDAO.insertHistoryRecords(BaseRouteDAO.java:4797)
    at com.agile.pc.cmserver.base.BaseRouteDAO.insertHistoryRecord(BaseRouteDAO.java:4741)
    at com.agile.pc.cmserver.base.BaseRouteDAO.insertChangeHistory(BaseRouteDAO.java:4720)
    at com.agile.pc.cmserver.base.BaseRouteDAO.insertChangeHistory(BaseRouteDAO.java:4678)
    at com.agile.pc.cmserver.base.BaseRouteDAO.logTAHistory(BaseRouteDAO.java:402)
    at com.agile.pc.cmserver.notification.ChangeHistoryDAO.logTAHistories(ChangeHistoryDAO.java:559)
    at com.agile.pc.cmserver.notification.ChangeHistoryService.transferSignOffs(ChangeHistoryService.java:379)
    at com.agile.pc.cmserver.notification.ChangeHistoryService.processChangeHistory(ChangeHistoryService.java:286)
    at com.agile.pc.cmserver.notification.ChangeHistoryService.processChangeHistories(ChangeHistoryService.java:119)
    at com.agile.pc.cmserver.notification.NotifyTask.processChangeHistory(NotifyTask.java:566)
    at com.agile.pc.cmserver.notification.NotifyTask.run(NotifyTask.java:214)
    at java.util.TimerThread.mainLoop(Timer.java:555)
    at java.util.TimerThread.run(Timer.java:505)
</pre></div>


<p>Just for reference, it was produced by appender with following configuration</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">&quot;AgileLog&quot;</span> <span class="na">class=</span><span class="s">&quot;org.apache.log4j.RollingFileAppender&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;File&quot;</span>   <span class="na">value=</span><span class="s">&quot;</span><span class="cp">${</span><span class="n">agile</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">dir</span><span class="cp">}</span><span class="s">/agile.log&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">&quot;org.apache.log4j.PatternLayout&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;ConversionPattern&quot;</span> <span class="na">value=</span><span class="s">&quot;%d\t&amp;lt;%c{1}:%p&amp;gt;\t%m\n&quot;/</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/layout&gt;</span>
<span class="nt">&lt;/appender&gt;</span>
</pre></div>


<p>Definitely, for automated log file analysis, it is better to reconfigure log4j. Although, mentioned layout is still something we may parse and process. Well, it's not the best option but sometimes you don't have time to wait until new log files will be generated. Let's go through one example.</p>
<h2>Log files to be analyzed</h2>
<p>Agile PLM produces a number of log files. In this analysis, I will use only one of them: <code>agile.log</code>. This log file is generated by <code>AgileLog</code> appender which is used by various logging categories throughout <code>log.xml</code> configuration.</p>
<h2>Preprocessing</h2>
<p>Concatenate all the files we are going to process </p>
<div class="highlight"><pre><span></span>agile.log
agile.log.1
agile.log.2
agile.log.3
agile.log.4
agile.log.5
</pre></div>


<p>into a one file</p>
<div class="highlight"><pre><span></span>cat agile.log* &gt; agile_all_logs
</pre></div>


<p>after that, let's convert <code>agile_all_logs</code> into CSV format which is much better for further processing. Here is a python script for it:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">input_file</span> <span class="o">=</span> <span class="s1">&#39;in/agile_all_logs&#39;</span>
<span class="n">output_file</span> <span class="o">=</span> <span class="s1">&#39;out/agile_all_logs.csv&#39;</span>

<span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_dir</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outf</span><span class="p">:</span>
    <span class="n">csv_writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">outf</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_MINIMAL</span><span class="p">,</span> <span class="n">lineterminator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;processing &quot;</span><span class="o">+</span><span class="n">input_file</span><span class="o">+</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">inp</span><span class="p">:</span>
        <span class="c1"># variable to store and accumulate logical log entry</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">line_num</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">inp</span><span class="p">:</span>
            <span class="n">line_num</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="c1"># we consider row that starts with YYYY-MM-DD date as a start</span>
            <span class="c1"># of new log entry</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d{4}-\d{2}-\d{2}&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">row</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> 
                        <span class="n">csv_writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> 
                    <span class="c1"># number of entries separated with tab</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">maxsplit</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">line</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Warning IndexError on line #&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">line_num</span><span class="p">))</span>
                <span class="c1"># skip existing content</span>
                <span class="n">row</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="n">csv_writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>


<p>After the processing our log entries should look like following</p>
<div class="highlight"><pre><span></span>2000-10-10,&quot;00:01:21,043&quot;,&lt;ChangeHistoryService:ERROR&gt;,&quot;process change notification failed: 
ORA-00001: unique constraint (AGILE.CHANGE_HISTORY_PK) violated

ORA-00001: unique constraint (AGILE.CHANGE_HISTORY_PK) violated

java.sql.BatchUpdateException: ORA-00001: unique constraint (AGILE.CHANGE_HISTORY_PK) violated

    at oracle.jdbc.driver.OraclePreparedStatement.executeBatch(OraclePreparedStatement.java:10401)
    at oracle.jdbc.driver.OracleStatementWrapper.executeBatch(OracleStatementWrapper.java:230)
    at weblogic.jdbc.wrapper.PreparedStatement.executeBatch(PreparedStatement.java:205)
    at com.agile.pc.cmserver.base.BaseRouteDAO.insertHistoryRecords(BaseRouteDAO.java:4797)
    at com.agile.pc.cmserver.base.BaseRouteDAO.insertHistoryRecord(BaseRouteDAO.java:4741)
    at com.agile.pc.cmserver.base.BaseRouteDAO.insertChangeHistory(BaseRouteDAO.java:4720)
    at com.agile.pc.cmserver.base.BaseRouteDAO.insertChangeHistory(BaseRouteDAO.java:4678)
    at com.agile.pc.cmserver.base.BaseRouteDAO.logTAHistory(BaseRouteDAO.java:402)
    at com.agile.pc.cmserver.notification.ChangeHistoryDAO.logTAHistories(ChangeHistoryDAO.java:559)
    at com.agile.pc.cmserver.notification.ChangeHistoryService.transferSignOffs(ChangeHistoryService.java:379)
    at com.agile.pc.cmserver.notification.ChangeHistoryService.processChangeHistory(ChangeHistoryService.java:286)
    at com.agile.pc.cmserver.notification.ChangeHistoryService.processChangeHistories(ChangeHistoryService.java:119)
    at com.agile.pc.cmserver.notification.NotifyTask.processChangeHistory(NotifyTask.java:566)
    at com.agile.pc.cmserver.notification.NotifyTask.run(NotifyTask.java:214)
    at java.util.TimerThread.mainLoop(Timer.java:555)
    at java.util.TimerThread.run(Timer.java:505)&quot;
</pre></div>


<h2>Analysis</h2>
<p>In this part, we will generate a summary table showing top error messages. To do it we will use python data analysis library called <em>Pandas</em>. It allows us do the whole analysis in few simple steps.</p>
<h4>1. Import</h4>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;out/agile_all_logs.csv&#39;</span><span class="p">,</span>
    <span class="n">names</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">),</span>
    <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
</pre></div>


<p>at this stage imported data frame has following format</p>
<p><img src="https://svovk.github.io/images/20180507_agile_plm_log_analisys/initial_data_frame.png" width="100%" alt="initial data frame format"></p>
<h4>2. Adjust</h4>
<p>In this step we</p>
<ul>
<li>split 'source' column into 2 columns</li>
<li>may also drop columns that will not be included in the analysis </li>
</ul>
<div class="highlight"><pre><span></span><span class="n">tmp</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="s1">&#39;&lt;(\w+):(\w+)&gt;&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;log_level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>


<p><img src="https://svovk.github.io/images/20180507_agile_plm_log_analisys/adjusted_data_frame.png" width="80%" alt="initial data frame format"></p>
<h4>3. Group</h4>
<div class="highlight"><pre><span></span><span class="c1"># group the data by class, log_leve, and message and export to csv file</span>
<span class="n">grouped</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;log_level&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">])</span>\
    <span class="o">.</span><span class="n">size</span><span class="p">()</span>\
    <span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;counts&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;counts&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>


<p>Now we see top log entries</p>
<p><img src="https://svovk.github.io/images/20180507_agile_plm_log_analisys/result_data_frame.png" width="80%" alt="initial data frame format"></p>
<h4>4. Export</h4>
<p>We might also export results</p>
<div class="highlight"><pre><span></span><span class="n">grouped</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;out/summary.csv&#39;</span><span class="p">)</span>
</pre></div>
                </div>
                <footer class="text-right">
                    <p>- Sergei Vovk</p>
                </footer>
    <section id="comments" class="comments ">
        <hr/>
        <h2>Comments</h2>
        <div id="disqus_thread"></div>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </section>
            </div>
        </div>
    </article>
</section>
<footer>
    <hr>
    <div class="row">
        <div class="col-lg-9 text-center">
            <p><small>
                Built by <a href="http://docs.getpelican.com/en/latest">Pelican</a> / <a href="https://github.com/ingwinlu/pelican-twitchy">pelican-twitchy</a>
                &middot;                    &copy; 2019 Sergei Vovk
            </small></p>
        </div>
    </div>
</footer>            </div>
        </div>
        <!-- /#page-content-wrapper -->
    </div>
    <!-- /#wrapper -->
    <!-- jQuery Version 1.11.2 -->
    <script src="https://svovk.github.io/theme/js/jquery-1.11.2.min.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="https://svovk.github.io/theme/js/bootstrap.min.js"></script>
    <!-- twitchy Script -->
    <script src="https://svovk.github.io/theme/js/pelican_twitchy.min.js"></script>
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-121069356-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

<!-- disqus -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'sergeivovk'; // required: replace example with your forum shortname

            var disqus_identifier = 'analyzing-agile-plm-log-files-with-python';
        var disqus_url = 'https://svovk.github.io/analyzing-agile-plm-log-files-with-python.html';

    var disqus_config = function () {
        this.language = "en";
    };
        /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- /disqus -->
</body>
</html>